apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: ml-inference-health-rules
  namespace: monitoring
  labels:
    release: prometheus
spec:
  groups:
  - name: ml-inference.rules
    rules:

    - alert: MLModelNotLoaded
      expr: model_loaded == 0
      for: 30s
      labels:
        severity: critical
        service: ml-inference
      annotations:
        summary: "Model not loaded for tenant {{ $labels.tenant }}"
        description: |
          The ML model failed to load in tenant {{ $labels.tenant }}.
          The service is running but cannot respond to inference requests.

    - alert: VectorizerNotLoaded
      expr: vectorizer_loaded == 0
      for: 30s
      labels:
        severity: critical
        service: ml-inference
      annotations:
        summary: "Vectorizer not loaded for tenant {{ $labels.tenant }}"
        description: |
          The vectorizer failed to load in tenant {{ $labels.tenant }}.
          The ML inference service is not operational.
